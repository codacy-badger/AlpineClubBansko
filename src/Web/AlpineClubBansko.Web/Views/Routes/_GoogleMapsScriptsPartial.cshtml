<script>
        var map;
        var x = document.getElementById('myCoords');

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: -34.397, lng: 150.644 },
                zoom: 10,
            });

            // Try HTML5 geolocation.
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    x.innerHTML = "Latitude: " + position.coords.latitude +
                        ", Longitude: " + position.coords.longitude;

                    var pos = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };

                    var marker = new google.maps.Marker({
                        animation: google.maps.Animation.DROP,
                        position: pos,
                        map: map,
                        title: "Моето местоположение",
                    });
                    marker.addListener('click', function () {
                            if (marker.getAnimation() !== null) {
                                marker.setAnimation(null);
                            } else {
                                marker.setAnimation(google.maps.Animation.BOUNCE);
                            }
                        });

                    map.setCenter(pos);

                    getData();
                });
            } else {
                x.innerHTML = "Geolocation is not supported by this browser.";
            }

            function getData() {
                $.ajax({
                    url: "/Routes/GetListCoords",
                    type: 'GET',
                    contentType: "application/json",
                    success: function (data) {
                        if (data != null) {
                            getMarkers(data);
                        } else {
                            console.log("No data")
                        }

                    },
                })
            }

            function getMarkers(data) {
                for (var i = 0; i < data.length; i++) {
                    var coords = data[i];
                    var latLng = new google.maps.LatLng(coords["latitude"], coords["longitude"]);
                    var marker = new google.maps.Marker({
                        position: latLng,
                        map: map
                    });
                    marker.addListener('click', function () {
                        map.panTo(marker.position);
                        map.setZoom(14);
                    });
                }
            }

        }
</script>

<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDbSxvh3OXCLYb-6pIMulz_1W0NbgpwLP0&callback=initMap">
</script>